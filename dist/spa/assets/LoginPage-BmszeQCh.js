import{Q as E,a as P,b as g}from"./QPage-DBZhwhGB.js";import{Q as S,a as f}from"./QForm-BLwCB--m.js";import{f as I,I as V,r as p,y as x,z as C,A as l,B as Q,E as i,D as o,F as w,Q as u,J as r}from"./index-BPZt8yH4.js";import{u as A}from"./auth-store-WMPpm4-N.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";function q(){return I(V)}const N={class:"q-pa-md row items-start q-gutter-md"},L={__name:"LoginPage",setup(k){const a=p(""),t=p(""),v=q(),c=Q(),n=A(),y=[s=>!!s||"Email is required",s=>/.+@.+\..+/.test(s)||"Email must be valid"],b=async()=>{console.log("Attempting to log in with:",a.value,t.value),v.notify({message:"Login attempt (placeholder)",color:"info"});const{data:s,error:e}=await r.auth.signUp({email:a.value,password:t.value});e?console.log(e):console.log("User: ",s)},U=async()=>{console.log("Attempting to log in with:",a.value,t.value);const{data:s,error:e}=await r.auth.signInWithPassword({email:a.value,password:t.value});e?console.log(e):(console.log("User: ",s),n.user=s.session.user,console.log("after login user is : ",n.user),await _())},_=async()=>{r.auth.onAuthStateChange(async(s,e)=>{s==="SIGNED_IN"?(console.log("User signed in",e),m(),c.push("/secret")):s==="SIGNED_OUT"?(console.log("User signed out"),c.push("/")):s==="PASSWORD_RECOVERY"?console.log("Password recovery"):s==="EMAIL_VERIFICATION"&&console.log("Email verification")})},m=async()=>{const s=await r.auth.getSession();console.log("User is: ",s.data.session.user.email),n.user=s.data.session.user,console.log("AuthStore User: ",n.user)},h=async()=>{const{data:s,error:e}=await r.auth.resetPasswordForEmail(a.value,{redirectTo:"http://localhost:9000/reset-password"});s&&(console.log("Password reset email sent"),e&&console.log("Error resetting password",e))};return(s,e)=>(C(),x(E,{class:"flex flex-center"},{default:l(()=>[i("div",N,[o(P,{bordered:"",class:"bg-grey-2 my-card",flat:""},{default:l(()=>[o(g,null,{default:l(()=>e[2]||(e[2]=[i("div",{class:"text-h6"},"Login Page",-1),i("div",{class:"text-subtitle2"},"Supabase auth example",-1)])),_:1}),o(g,{class:"q-pt-none"},{default:l(()=>[o(S,{class:"q-gutter-md",onSubmit:U},{default:l(()=>[o(f,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=d=>a.value=d),rules:y,filled:"",label:"Email",type:"email"},null,8,["modelValue"]),o(f,{modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=d=>t.value=d),filled:"",label:"Password",type:"password"},null,8,["modelValue"]),i("div",null,[o(u,{color:"primary",label:"Login",size:"md",type:"submit"}),e[3]||(e[3]=w("   ")),o(u,{color:"secondary",label:"Register",size:"md",onClick:b}),e[4]||(e[4]=w("   ")),o(u,{color:"secondary",flat:"",label:"Reset Password",size:"md",onClick:h}),o(u,{color:"info",flat:"",label:"Get user",size:"md",onClick:m})])]),_:1})]),_:1})]),_:1})])]),_:1}))}},T=R(L,[["__scopeId","data-v-df46749f"]]);export{T as default};
