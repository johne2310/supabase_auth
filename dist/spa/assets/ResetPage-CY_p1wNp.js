import{Q as m,a as p,b as l}from"./QPage-B0QI-vqd.js";import{Q as f,a as g}from"./QForm-CpRNBAYT.js";import{r as _,o as w,J as u,y as b,z as h,A as o,B as y,E as r,D as s,Q}from"./index-cnP0FZg9.js";import{u as R}from"./auth-store-CJV5gSJj.js";const S={class:"q-pa-md row items-start q-gutter-md"},B={__name:"ResetPage",setup(v){const d=y(),a=_(""),n=R();w(async()=>{console.log("Reset page mounted"),u.auth.onAuthStateChange(async(t,e)=>{t==="PASSWORD_RECOVERY"&&(n.user=e.user,console.log("User for reset is",a.value)),t==="SIGNED_IN"&&console.log("User signed in",e)})});const c=async()=>{console.log("Attempting to reset password with:",a.value);const{data:t,error:e}=await u.auth.updateUser({password:a.value});e?console.log(e):(console.log("User: ",t),await d.push("/secret"))};return(t,e)=>(h(),b(m,{class:"flex flex-center"},{default:o(()=>[r("div",S,[s(p,{bordered:"",class:"bg-grey-2 my-card",flat:""},{default:o(()=>[s(l,null,{default:o(()=>e[1]||(e[1]=[r("div",{class:"text-h6"},"Password Reset Page",-1),r("div",{class:"text-subtitle2"},"Supabase auth example",-1)])),_:1}),s(l,{class:"q-pt-none"},{default:o(()=>[s(f,{class:"q-gutter-md",onSubmit:c},{default:o(()=>[s(g,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value=i),filled:"",label:"Reset password",type:"password"},null,8,["modelValue"]),r("div",null,[s(Q,{color:"primary",label:"Reset Password",size:"md",type:"submit"})])]),_:1})]),_:1})]),_:1})])]),_:1}))}};export{B as default};
